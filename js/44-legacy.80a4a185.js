"use strict";(self["webpackChunkastracoin"]=self["webpackChunkastracoin"]||[]).push([[44],{42044:function(t,s,e){e.r(s),e.d(s,{default:function(){return p}});var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"user-app"}},[a("div",{staticClass:"user-page"},[a("router-link",{staticClass:"close-page",attrs:{to:"/"}},[a("i",{staticClass:"ai ai-arrow-back"}),a("div",{staticClass:"close-title"},[t._v("Back")])]),a("div",{staticClass:"user-photo"},[a("div",{staticClass:"user-pic-block"},[a("img",{ref:"image",staticClass:"user-pic",attrs:{src:t.user.photo?this.$store.state.url+t.user.photo:e(76391),alt:""}})]),a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".jpg, .png, .jpeg, |image/*"},on:{change:t.onFileChange}}),a("div",{staticClass:"edit-user-pic",on:{click:function(s){return t.$refs.fileInput.click()}}},[a("i",{staticClass:"ai ai-camera-outline"})])]),a("div",{staticClass:"user-fullname"},[t._v(t._s(t.user.name)+" "+t._s(t.user.last_name))]),a("div",{staticClass:"user-email"},[t._v(t._s(t.user.email))]),a("div",{staticClass:"user-tools"},[a("ul",{staticClass:"tools-items"},[a("router-link",{attrs:{tag:"li",to:"/ranks"}},[a("i",{staticClass:"ai ai-trending-up"}),t._v("Student Ranking")])],1),a("ul",{staticClass:"tools-items"},[a("li",[a("i",{staticClass:"ai ai-person-outline"}),t._v(t._s(t.user.qwasar))]),a("li",[a("i",{staticClass:"ai ai-school-outline"}),t._v(t._s(t.user.stack))]),a("li",[a("i",{staticClass:"ai ai-wallet-outline"}),t._v(t._s(t.user.wallet))])]),a("ul",{staticClass:"tools-items"},[a("router-link",{attrs:{tag:"li",to:"/update-password"}},[a("i",{staticClass:"ai ai-key-outline"}),t._v("Change password")])],1),a("ul",{staticClass:"tools-items"},[a("li",{staticClass:"btn-log-out",on:{click:t.logout}},[a("i",{staticClass:"ai ai-log-out-outline"}),t._v("Log Out")])])])],1),t.croppedImage?a("img",{attrs:{src:t.croppedImage,alt:""}}):t._e(),a("div",{staticClass:"modals",attrs:{id:"modals"}},[a("div",{class:{active:t.openUpload},attrs:{id:"upload-avatar"}},[a("div",{staticClass:"modal-header"},[a("div",{staticClass:"modal-title"},[t._v("Upload")]),a("div",{staticClass:"modal-tools"},[a("div",{staticClass:"modal-close",on:{click:t.closeModals}},[a("i",{staticClass:"ai ai-close"})])])]),a("div",{staticClass:"modal-body"},[a("Cropper",{ref:"cropper",attrs:{src:t.image,"stencil-component":"circle-stencil"}})],1),a("div",{staticClass:"upload-tools"},[a("button",{on:{click:t.reset}},[t._v("Reset")]),a("button",{on:{click:t.uploadImage}},[t._v("Upload")])])])])])},i=[],r=e(16198),o=(e(41539),e(78783),e(33948),e(60285),e(41637),e(78975),e(26867)),n={name:"UserPage",data:function(){return{user:{},image:null,openUpload:!1,croppedImage:null}},components:{Cropper:o.fl},mounted:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.$store.state.user){s.next=3;break}return s.next=3,t.$store.dispatch("getUser");case 3:t.user=t.$store.state.user,window.addEventListener("keydown",(function(s){"Escape"==s.key&&t.$router.push("/")}));case 5:case"end":return s.stop()}}),s)})))()},methods:{closeModals:function(){this.openUpload=!1},logout:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("logout");case 2:t.$router.push("/login");case 3:case"end":return s.stop()}}),s)})))()},reset:function(){this.$refs.cropper.reset(),this.image=null,this.openUpload=!1},onFileChange:function(t){var s=t.target.files[0];this.image=URL.createObjectURL(s),this.openUpload=!0},uploadImage:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function s(){var e,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e=t.$refs.cropper.getResult(),a=e.canvas,!a){s.next=5;break}return i=new FormData,s.next=5,a.toBlob((function(s){i.append("photo",s),t.$store.dispatch("setPhoto",i).then((function(s){t.$refs.image.src=t.$store.state.url+s.data.path}))}),"image/jpeg");case 5:t.openUpload=!1,Toast.fire("Success","Photo uploaded","success");case 7:case"end":return s.stop()}}),s)})))()}}},l=n,c=e(1001),u=(0,c.Z)(l,a,i,!1,null,"1b8d5700",null),p=u.exports}}]);
//# sourceMappingURL=44-legacy.80a4a185.js.map